<html>
<head>
<title>QC Web Control</title>
<script type="text/javascript" src="jquery-2.0.1-dev.js"></script>
<link rel="stylesheet" href="default.css">
</head>

<body class=""> <!-- class="debbuging" -->
<a class="debug" href = "model/">model</a><br/>

Quel est le mot qui represente le mieux Prun' pour toi ?
<form action="model/message" method="post" id="messageForm">
	<input type="text" name="contenu" value="" size="40" />
	<input type="submit" value="Envoyer !"/>
</form>

<div id="lastCreation" class="debug"></div>

<script>
/* attach a submit handler to the form */
$("#messageForm").submit(function(event) {
 
  /* stop form from submitting normally */
  event.preventDefault();
 
  /* get some values from elements on the page: */
  var $form = $( this ),
      term = $form.find( 'input[name="contenu"]' ).val(),
      url = $form.attr( 'action' );
  var message = new Object();
  message.contenu = term;
 console.log(url+ '->' +JSON.stringify(message));
  /* Send the data using post */
 var updateLastCreated = function(url){
	  $("#lastCreation").html("<a href='"+url+"'>Derniere Creation</a>")
 }
  
  $.ajax(url,{
	  contentType : "application/json",
	  type :"POST",
	  data : JSON.stringify(message) })
	  .done(function (data, textStatus, jqXHR) {
	  	updateLastCreated(jqXHR.getResponseHeader("location"));
		$("#messageForm").get(0).reset();
   	});
  

  
});
</script>

</body>
</html>